<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–ö–æ—Ä–∑–∏–Ω–∞</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <h1>üõí –í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h1>
    <button onclick="location.href='index.html'">‚Üê –ù–∞–∑–∞–¥</button>
  </header>

  <main>
    <div id="cart-items"></div>
    <div id="total">–°—É–º–º–∞: 0‚ÇΩ</div>
    <button id="checkout-btn">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
  </main>

  <script>
    let cart = JSON.parse(localStorage.getItem('cart') || '[]');

    function renderCart() {
      const container = document.getElementById('cart-items');
      container.innerHTML = '';
      let total = 0;

      if (cart.length === 0) {
        container.innerHTML = "<i>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</i>";
        document.getElementById('total').innerText = '–°—É–º–º–∞: 0‚ÇΩ';
        return;
      }

      cart.forEach((item, index) => {
        let qtyLabel = '';
        if (item.unit === 'perKg' || item.unit === 'per100g') {
          qtyLabel = `${item.quantity} –≥`;
        } else {
          qtyLabel = `${item.quantity} —à—Ç`;
        }

        container.innerHTML += `
          <div style="margin-bottom: 15px; background: #fff; padding:10px; border-radius:8px;">
            <strong>${item.name}</strong> ‚Äî ${qtyLabel}<br>
            <span>–ò—Ç–æ–≥–æ: ${item.sum}‚ÇΩ</span><br>
            ${item.img ? `<img src="${item.img}" style="max-width:70px;max-height:70px;">` : ''}
            <button onclick="removeItem(${index})">–£–¥–∞–ª–∏—Ç—å</button>
          </div>
        `;
        total += item.sum;
      });

      document.getElementById('total').innerText = '–°—É–º–º–∞: ' + total + '‚ÇΩ';
    }

    function removeItem(index) {
      cart.splice(index, 1);
      localStorage.setItem('cart', JSON.stringify(cart));
      renderCart();
    }

    document.getElementById('checkout-btn').onclick = function () {
      window.location.href = "checkout.html";
    };

    renderCart();
  </script>
</body>
</html>
