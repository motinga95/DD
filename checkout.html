<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <h1>üì¶ –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h1>
    <button onclick="location.href='cart.html'">‚Üê –ù–∞–∑–∞–¥ –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
  </header>

  <main>
    <form id="order-form">
      <label>–ò–º—è:</label><br/>
      <input type="text" name="name" required /><br/><br/>

      <label>–¢–µ–ª–µ—Ñ–æ–Ω:</label><br/>
      <input type="tel" name="phone" required /><br/><br/>

      <label>–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏:</label><br/>
      <textarea name="address" required></textarea><br/><br/>

      <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</label><br/>
      <textarea name="comment"></textarea><br/><br/>

      <button type="submit">üì® –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑</button>
    </form>
  </main>

  <script>
    document.getElementById('order-form').addEventListener('submit', function(e) {
      e.preventDefault();
      const formData = new FormData(this);
      const cart = JSON.parse(localStorage.getItem('cart') || '[]');
      const order = {
        name: formData.get('name'),
        phone: formData.get('phone'),
        address: formData.get('address'),
        comment: formData.get('comment'),
        items: cart
      };

      let message = `üõí –ù–æ–≤—ã–π –∑–∞–∫–∞–∑\n`;
      message += `üë§ –ò–º—è: ${order.name}\n`;
      message += `üìû –¢–µ–ª–µ—Ñ–æ–Ω: ${order.phone}\n`;
      message += `üè† –ê–¥—Ä–µ—Å: ${order.address}\n`;
      message += `üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: ${order.comment || '‚Äî'}\n\n`;
      message += `üì¶ –¢–æ–≤–∞—Ä—ã:\n`;

      order.items.forEach(item => {
        message += `‚Ä¢ ${item.name} √ó ${item.quantity} (${item.price}‚ÇΩ)\n`;
      });

      const TOKEN = '–¢–í–û–ô_–¢–û–ö–ï–ù_–ë–û–¢–ê';       // ‚Üê –í—Å—Ç–∞–≤—å —Å—é–¥–∞ —Ç–æ–∫–µ–Ω
      const CHAT_ID = '–¢–í–û–ô_CHAT_ID';         // ‚Üê –í—Å—Ç–∞–≤—å —Å—é–¥–∞ Chat ID
      const telegramURL = `https://api.telegram.org/bot${TOKEN}/sendMessage`;

      fetch(telegramURL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          chat_id: CHAT_ID,
          text: message
        })
      })
      .then(() => {
        alert("‚úÖ –ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ Telegram!");
        localStorage.removeItem('cart');
        this.reset();
      })
      .catch(() => {
        alert("‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–∫–∞–∑–∞ –≤ Telegram.");
      });
    });
  </script>
</body>
</html>
